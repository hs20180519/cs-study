## 00. 웹 통신의 큰 흐름
=> 브라우저에 `https://www.naver.com`을 입력했을 때 일어나는 일

![네트워크 흐름 다이어그램](https://media.vlpt.us/images/woo0_hooo/post/e119383c-61cc-46d5-a85d-b27b65ddee1e/Untitled.png)

## 01. 브라우저 (Browser)

![title](https://lh3.googleusercontent.com/proxy/EkV9bSH3iBbD1ld9xKcJFyGr45tkdHgKc5Han1mlrqjo3KLHbacTCw8tfiHYfk-nDOcEd2Q1TA)


#### 1) 브라우저의 URL 해독 
브라우저는 URL을 해독하고, 프로토콜(https), 도메인(www.naver.com), 경로 등을 분석한다.

#### 2) HTTP request
HTTP 리퀘스트 메시지를 생성하고, 요청할 리소스의 경로와 필요한 헤더 정보를 담는다.

#### 3)  IP 주소를 조회
DNS 서버에 도메인의 IP 주소를 조회하기 위해 DNS 쿼리를 전송한다.

**응용 계층(7계층)** 에서 이루어진다.


### DNS 리졸버
DNS 서버에 IP 주소를 조회하는 과정은 DNS 클라이언트인 **리졸버(resolver)** 가 DNS 서버에 쿼리 메시지를 보내고 응답을 받는 절차로 진행된다. 이 과정을 **네임 리졸루션(name resolution)** 이라고 부르며, 브라우저는 이를 통해 목적지 서버의 IP 주소를 확인한다.



## 02. 프로토콜 스택 (Protocol Stack)

#### (1) IP 주소와 TCP 연결 수립
DNS를 통해 IP 주소를 얻은 후, 브라우저는 서버와의 통신을 위해 **3-way handshake** 를 통해 TCP 연결을 수립한다. 브라우저는 TCP 세그먼트를 생성하고, 이를 IP 패킷으로 캡슐화하여 네트워크로 전송한다.

이 단계에서 OS에 내장된 **프로토콜 스택** 이 활용되며, 네트워크 하드웨어(LAN 어댑터)를 통해 실제 데이터가 서버로 전송된다.

**전송 계층(4계층)** 에서 처리된다. 

![title](https://velog.velcdn.com/images/choiys0212/post/c6c69813-a31d-4f37-ab95-5f49ec09dab5/image.png)



## 03. 네트워크 (Network)

### TCP 세그먼트와 IP 패킷
TCP 세그먼트는 **IP 패킷** 으로 캡슐화되며, 이 패킷은 라우터를 통해 목적지까지 전달된다. 패킷의 경로 설정 및 라우팅은 **네트워크 계층(3계층)** 에서 수행된다.

### LAN vs WAN
| 구분 | 설명 |
|------|------|
| LAN (Local Area Network) | 좁은 지역 내에서 컴퓨터들을 연결하는 네트워크. 주로 사무실, 집 등에서 사용 |
| WAN (Wide Area Network)  | 넓은 지역을 연결하는 네트워크 |

### 리피터 vs 라우터 vs 허브
| 장치 | 설명 |
|------|------|
| 리피터 | 신호를 증폭하여 네트워크 거리를 확장하는 장치. |
| 라우터 | 서로 다른 네트워크 간에 데이터를 전달하는 장치. IP 주소를 기반으로 패킷을 라우팅함. |
| 허브   | 여러 장치를 연결하여 데이터를 전송하는 장치. 단순히 데이터를 모든 포트로 전송함. |

## 04. 방화벽 (Firewall)

서버에 도착한 IP 패킷은 방화벽을 통과하게 된다. 방화벽은 네트워크 패킷을 검사하여 악성 트래픽을 차단하고, 허용된 트래픽만 서버로 전달한다. 방화벽은 **네트워크 계층(3계층)** 과 **전송 계층(2계층)** 에서 작동한다.


또한 캐시 서버를 사용해 응답을 줄일 수 있다. 캐시 서버는 반복적인 요청에 대해 서버 대신 응답할 수 있어, 전체 서버 부하를 감소시킨다.


## 05. 웹 서버 (Web Server)

서버는 도착한 패킷을 **역캡슐화** 하여 원래의 **HTTP 요청 메시지** 로 복원한다. 서버는 요청된 데이터를 준비한 후 **HTTP 응답 메시지** 를 생성하여 클라이언트에 전송한다. 이 과정은 **응용 계층(7계층)** 에서 이루어지며, 서버에서의 처리 이후 응답 메시지는 다시 각 계층을 통해 전송된다.


## 06. OSI 7계층과 웹 통신

| 계층                     | 설명                                          |
|--------------------------|-----------------------------------------------|
| 응용 계층(7계층)         | HTTP/HTTPS, DNS와 같은 프로토콜을 통해 데이터 전송 |
| 표현 계층(6계층)         | 데이터 형식 변환 및 암호화 처리 (SSL/TLS)      |
| 세션 계층(5계층)         | 세션 설정 및 관리                             |
| 전송 계층(4계층)         | TCP/UDP를 사용하여 신뢰성 있는 데이터 전송 제공 |
| 네트워크 계층(3계층)     | IP 주소를 기반으로 데이터 패킷의 경로 설정 및 전달 |
| 데이터 링크 계층(2계층)  | 물리적 네트워크 상에서 데이터 프레임을 전송      |
| 물리 계층(1계층)         | 실제 전기 신호 또는 무선 신호로 데이터 전송    |




## 07. https://www.naver.com을 브라우저에 입력하면 일어나는 일을 설명해주세요? 
브라우저에 https://www.naver.com을 입력하면, 먼저 DNS를 통해 도메인 네임을 IP 주소로 변환합니다. 이 과정이 완료되면, 서버와의 TCP 연결을 위한 3-way handshake가 이루어집니다. TCP 연결이 설정되면 HTTP 요청을 서버에 보내게 되며, HTTPS의 경우 SSL/TLS 핸드셰이크가 추가로 실행되어 안전한 통신이 설정됩니다. 이후 클라이언트는 서버에 www.naver.com 리소스를 요청하고, 서버는 그에 맞는 HTTP 응답을 반환합니다. 이 응답에는 HTML 문서뿐만 아니라, CSS, JavaScript, 이미지 등 다른 리소스에 대한 링크도 포함될 수 있습니다. 브라우저는 받은 HTML 문서를 기반으로 페이지를 렌더링하고, 사용자에게 시각적으로 표시합니다. 
