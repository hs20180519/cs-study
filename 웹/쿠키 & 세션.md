# 00. HTTP 프로토콜의 특징
### 1. Connectionless(비연결지향)
- 클라이언트에서 서버에 요청을 보내면 서버는 클라이언트에 응답(response)를 하고, 연결을 끊는 특징을 가지고 있다
- HTTP 1.1 버전에서 Connection 헤더에 keep-alive로 커넥션을 유지할 수 있는 기능이 추가되었다(default)

### 2. Stateless(상태 정보 유지 안함)
- HTTP 통신은 연결을 끊는 순간 클라이언트와 서버의 통신이 끝나며 상태 정보를 유지하지 않는 특징을 가지고 있다
- 클라이언트와 첫 번째 통신에서 데이터를 주고 받았다고 해도, 두 번째 통신에서 이전 데이터를 유지하지 않는다. (하지만 실제로 데이터 유지가 필요한 경우가 더 많다)

### 쿠키와 세션을 사용하는 이유
- HTTP 프로토콜의 특징이자 약점을 보완하기 위해 사용
- 비연결지향과 상태정보 유지 안함이라는 특징을 가지고 있는데,
- 로그인을 다시 하거나, 상품 선택 후 구매 페이지에서 선택한 상품의 정보가 없거나 하는 문제가 발생할 수 있다

# 01. 쿠키
- HTTP의 일종으로, 사용자가 웹 사이트를 방문할 경우, 해당 사이트의 서버에서 <b>사용자의 컴퓨터에 저장하는 작은 기록 정보 파일</b>이다.
- HTTP에서 클라이언트의 상태 정보를 쿠키 형태로 클라이언트 PC에 저장하였다가 필요시 정보를 참조하거나 재사용할 수 있다.

### 특징
- Key-value 쌍으로 구성
- 쿠키 이름, 쿠키 값, 만료 시간, 전송할 도메인명, 전송할 경로, 보안 연결 여부, HttpOnly여부로 구성
- 도메인 당 20개의 쿠키를 가질 수 있다
- 하나의 쿠키는 4KB(4096 byte)까지 저장 가능
- 클라이언트에서 수정할 수 있기 때문에 위변조의 위험성(XSS 공격)이 항상 존재한다
- 따라서 쿠키 값을 암호화해야 하며, 민감하거나 중요한 정보를 담지 않도록 해야한다

### 작동 방식
![image](https://github.com/user-attachments/assets/d4931481-59f6-44c4-9999-6425caa7b065)

1. 클라이언트가 서버에 로그인 요청
2. 서버는 클라이언트의 로그인 요청의 유효성을 확인하고(아이디와 비밀번호 검사), 응답 헤더에 set-cookie:를 통해 쿠키를 추가하여 응답
3. 클라이언트는 이후 서버에 요청할 때 전달받은 쿠키를 자동으로 요청 헤더에 추가하여 요청한다. (브라우저에서 처리)
(쿠키의 기한이 정해져 있지 않고 명시적으로 지우지 않는다면 반 영구적으로 쿠키가 남아있다)

### 사용 목적
1. 세션 관리 : 로그인, 사용자 닉네임, 접속 시간, 장바구니 등의 서버가 알아야할 정보들을 저장
2. 개인화 : 사용자마다 다르게 그 사람에 적절한 페이지를 보여줄 수 있다
3. 트래킹 : 사용자의 행동과 패턴을 분석하고 기록

### 쿠키의 종류
![image](https://github.com/user-attachments/assets/9cfc3fd1-cc3f-44fb-b048-1569d0188c56)

# 02. 세션
- 일정 시간 동안 같은 사용자(브라우저)로부터 들어오는 일련의 요구를 하나의 상태로 보고 그 상태를 유지시키는 기술
- 일정 시간이란, 방문자가 웹 브라우저를 통해 웹 서버에 접속한 시점부터 웹 브라우저를 종료하여 연결을 끝내는 시점을 의미한다
- 즉, 브라우저가 종료되기 전까지 클라이언트의 요청을 유지하게 해주는 기술이다

### 특징
- 웹 서버에 웹 컨테이너의 상태를 유지하기 위한 정보를 저장한다
- 웹 서버에 저장되는 쿠키이다(세션 쿠키)
- 브라우저를 닫거나 서버에서 세션을 삭제했을 때만 삭제가 되기 때문에 쿠키보다 비교적 보안적으로 우수하다
- 저장 데이터에 제한이 없다(서버 용량 허용 범위 내)
- 각 클라이언트에 고유 세션 ID(Session ID)를 부여하여 이를 통해 클라이언트를 구분하고 각 요구에 맞는 서비스를 제공한다
- 세션의 내용은 서버에 저장되기 때문에 서버 부하가 발생할 수 있다
- 세션에 대한 정보가 서버에 있어 쿠키에 비해 비교적 속도가 느리다
- (세션 하이재킹 공격을 방지하기 위해 세션 ID의 재생성, 세션 데이터의 암호화 등의 조치 필요)

### 작동 방식
![image](https://github.com/user-attachments/assets/2896c610-b1f4-4e7d-9281-aeda73c5a536)

1. 클라이언트가 서버에 로그인 요청
2. 서버는 클라이언트의 로그인 요청의 유효성을 확인하고(아이디와 비밀번호 검사) unique한 id를 sessino ID로 생성하여 저장한다
3. 서버가 응답할 때 응답 헤더에 세션 ID를 쿠키에 추가하여 응답한다
4. 클라이언트는 이후 서버에 요청할 때 전달받은 세션 ID를 쿠키에 자동으로 요청 헤더에 추가하여 전송한다
5. 서버에서는 요청 헤더의 세션 ID 값을 저장된 세션저 장소에서 찾아보고 유효한지 확인한 후 요청을 처리하고 응답한다

### 사용 목적
1. 사용자나 다른 누군가에게 노출되면 안되는 보안적으로 중요한 정보들을 서버 안에서 다루기 위해 사용한다

# 03. 쿠키 VS 세션
![image](https://github.com/user-attachments/assets/74c099c8-878d-4052-a610-a0ccbb9f3200)

### 저장 위치
- 쿠키 : 클라이언트의 웹 브라우저가 지정하는 메모리 또는 하드 디스크
- 세션 : 서버의 메모리

### 만료 시점
- 쿠키 : 저장할 때 expires 속성을 정의해 무효화시키면 삭제될 날짜 지정 가능
- 세션 : 클라이언트가 로그아웃하거나, 설정 시간동안 반응이 없으면 무효화되어 정확한 시점을 알 수 없음

### 리소스
- 쿠키 : 클라이언트에 저장되고, 클라이언트의 메모리를 사용하기 때문에 서버 자원을 사용하지 않음
- 세션 : 서버에 저장되고, 서버의 메모리로 로딩되기 때문에 세션이 생길 때마다 리소스를 차지함

### 용량 제한
- 쿠키 : 클라이언트도 모르게 접속되는 사이트에 의해 설정될 수 있기 때문에 한 도메인당 20개, 한 개의 쿠키당 4KB로 제한
- 세션 : 클라이언트가 접속하면 서버에 의해 생성되므로 개수나 용량 제한 없음

# 04. 세션과 쿠키를 모두 사용하는 이유
- 세션이 쿠키에 비해 보안이 높은 편이나 쿠키를 사용하는 이유는 세션은 서버에 저장되고, 서버의 자원을 사용하기 땜누에 서버 자원에 한계가 있고, 속도가 느려질 수 있기 때문이다.
- 따라서, 자원관리 차원에서 쿠키와 세션을 적절한 요소 및 기능에 병행 사용하여 서버 자원의 낭비를 방지하며 웹 사이트의 속도를 높일 수 있다.

# 05. 캐시
- 캐시는 웹 페이지 요소를 저장하기 위한 임시 저장소(쿠키/세션은 정보 저장)
- 웹 페이지를 빠르게 렌더링할 수 있도록 도와준다(쿠키/세션은 사용자의 인증)
- 이미지, 비디오, 오디오, css, js 파일 등 데이터나 값을 미리 복사해 놓는 리소스 파일들의 임시 저장소
- 저장 공간이 작고 비싼 대신 빠른 성능
- 캐시 히트 / 캐시 미스

# 06. 자주 나오는 질문
### 1. 세션과 쿠키의 차이점
- 저장 위치 : 쿠키는 클라이언트(브라우저)에 저장하며, 세션은 서버에 저장, 클라이언트는 세션 ID만 저장한다.
- 라이프 사이클 : 쿠키도 만료 기간이 있지만 파일로 저장되기 때문에 브라우저를 종료해도 정보가 유지될 수 있으며, 만료기간을 따로 지정해 쿠키를 삭제할 때까지 유지할 수도 있다.
- 반면에 세션도 만료 기간을 정할 수 있지만, 브라우저가 종료되면 만료 기간에 상관없이 삭제된다.
- 보안 : 쿠키는 클라이언트에 저장되므로 변조 및 탈취 위험이 존재한다. (XSS 공격에 취약) 세션은 서버에서 관리되므로 비교적 안전하지만, 세션 ID 탈취 위험이 존재한다.
=> 쿠키는 클라이언트에 저장되므로 보안에 취약하지만 서버 부담이 적고, 세션은 서버에서 관리되어 보안성이 높지만 서버 자원이 더 필요하다.

### 2. 쿠키와 세션중에 더 안전한 것?
- 세션이 쿠키보다 더 안전함
- 쿠키는 클라이언트 측에 저장되므로 변조나 탈취의 위험이 있다.
- 특히, XSS(크로스 사이트 스크립팅) 공격으로 쿠키를 탈취할 수 있다.
- 세션은 서버에서 관리되므로 클라이언트에서 직접 접근할 수 없어 보안성이 높다.
- 하지만 세션 ID가 탈취되면 세션 하이재킹(Session Hijacking) 공격이 발생할 수 있다.
=> 보안 측면에서는 세션이 더 안전하지만, 세션 ID 탈취 공격을 막기 위해 HTTPS를 사용하고, 세션 시간 제한을 설정하는 것이 중요합니다.

### 3. 캐시 적중률
![image](https://github.com/user-attachments/assets/5d01d875-24c7-4b54-a034-a181ad679920)
- 6.8ns
