# 01. 중앙처리장치(CPU)

CPU는 컴퓨터의 두뇌이다.

CPU는 메모리에 저장된 명령어를 읽어 들이고, 해석하고, 실행하는 부품이다.

![컴퓨터-구조_CPU](https://github.com/user-attachments/assets/1edd6a01-cca5-461b-af18-ff479cc7c706)

### CPU의 내부 구성 요소

- **산술논리연산장치(ALU)**
    
    =계산기
    
    계산만을 위해 존재하는  부품
    
- **레지스터**
    
    CPU 내부의 작은 임시 저장 장치
    
    프로그램 실행에 필요한 값들을 임시로 저장
    
    CPU 안에는 여러 레지스터가 존재, 각각 다른 이름과 역할을 가짐
    
- **제어장치**
    
    **제어 신호**를 내보내고, 명령어를 해석하는 장치
    
    (이 때, 제어 신호란 컴퓨터 부품들을 관리하고 작동시키기 위한 일종의 전기 신호)

### 레지스터의 종류

용도에 따라 범용 레지스터와 특수목적 레지스터로 구분됨

- 범용 레지스터: 다양한 상황에서 유연하게 사용할 수 있는 레지스터로, 주소값/데이터값 모두 저장가능
- 특수목적 레지스터: 특별한 용도를 사용하는 레지스터

### 중요한 특수 목적 레지스터

- **PC (프로그램 카운터)** : 다음에 수행할 명령어 주소 저장
- **IR (명령어 레지스터)** : 현재 해석할 명령어 저장, 해석 후 제어 신호 발생
- **MAR (메모리주소 레지스터)** : 읽기와 쓰기 연산을 수행할 메모리 주소를 저장.
- **MBR (메모리버퍼 레지스터)** : 메모리의 값을 저장.
- **플래그 레지스터** : ALU가 보낸 플래그 값을 저장.


# 02. CPU의 동작 과정

메모리 1번지 ~ 2번지까지 명령어가 저장되어 있는 상황

### 1)

- 제어장치는 1번지에 저장된 명령어를 읽어 들이기 위해 메모리에 ‘메모리 읽기’ 제어 신호를 보냄

![메모리-읽기-제어-신호-940x295](https://github.com/user-attachments/assets/b65360cd-aee5-4261-a0c4-a2cfcaf3dd42)

### 2)

- 1번지 메모리는 저장된 명령어를 CPU에 건네주고, 명령어가 레지스터에 저장됨
- 제어장치는 읽어 들인 명령어를 해석한 뒤 3번지와 4번지에 저장된 데이터가 필요하다 판단
- 제어장치는 3번지와 4번지에 저장된 데이터를 읽기 위해 메모리에 ‘메모리 읽기’ 제어 신호를 보냄

![메모리-읽기-제어-신호-2-1](https://github.com/user-attachments/assets/69c890fb-6a0d-4e70-87e6-c143ed5f9c30)

### 3)

- 메모리는 3번지와 4번지에 저장된 데이터를 CPU에 건네주고, 데이터들이 서로 다른 레지스터에 저장됨
- ALU는 읽어들인 데이터로 연산 수행
- 그 결과 값을 레지스터에 저장

![메모리-읽기-제어-신호-3](https://github.com/user-attachments/assets/6f2dbac5-7884-43d4-a491-a508d26aeb78)

---

### 4)

- 제어장치는 2번지에 저장된 명령어를 읽어 들이기 위해 메모리에 ‘메모리 읽기’ 제어 신호를 보냄

![메모리-읽기-제어-신호-4](https://github.com/user-attachments/assets/e5e3f30d-55b7-424d-b3ab-3f6590e1a71b)

- 메모리는 2번지에 저장된 명령어를 CPU에 건네주고, 이 명령어는 레지스터에 저장됨
- 제어장치는 이 명령어를 해석한 뒤, 메모리에 계산 결과를 저장해야 한다 판단

![메모리-읽기-제어-신호-5](https://github.com/user-attachments/assets/fcdb817b-bec2-4eb0-b2d4-1f8bbb7edb97)

- 제어장치는 계산 경과를 저장하기 위해 메모리에 ‘메모리 쓰기’ 제어 신호와 함께 계산 결과인 220을 보냄
- 메모리에 계산 결과 저장!

![메모리-쓰기-제어-신호](https://github.com/user-attachments/assets/322461d8-2082-4b7d-b413-711322376cc7)

# 03. 명령어 사이클

CPU는 프로그램 실행을 위해 주기억장치에서 명령어를 순차적으로 인출하여 해독하고 실행하는 과정을 반복함

**명령어 사이클**이란, CPU가 주기억장치에서 한 번에 하나의 명령어를 인출하여 실행하는데 필요한 일련의 활동

**인출/실행/간접/인터럽트 사이클**로 나뉨

기본적으로 명령어의 `기본 사이클 = 인출 사이클 + 실행 사이클`

![명령어 사이클](https://github.com/user-attachments/assets/e3d0cae8-7964-45eb-a20d-8ec97c3baad6)


### CPU 명령어 구성

- CPU 명령어 = 명령코드 + 피연산자
    - 명령코드(Op code)
        - 명령어들은 1 이상의 피연산자를 갖거나, 갖지 않을 수 있음
        - 데이터 전송: STORE, LOAD
        - 연산: ADD, AND, XOR, SHIFT 등
    - 피연산자(Operand)
        - 데이터(리터럴) or 데이터 위치(메모리 내 주소, 어느 레지스터인가 등)

### 명령어 인출 사이클

```
T0: MAR <- PC
T1: MBR <- M[MAR], PC <- PC + 1
T2: IR <- MBR
```

T0

- 명령어가 저장된 주소를 지정

T1

- MAR번지 메모리 명령어를 MBR로 전송
- PC가 다음번 명령어 주소를 가리키도록 준비 (PC 값 1 증가)

T2

- 인출한 명령어를 IR로 전송

![명령어 인출 사이클](https://github.com/user-attachments/assets/f2d1bb63-f209-4745-808c-57da0cf4d2e0)

### 명령어 실행 사이클

실행 사이클은 CPU로 가져온 명령어를 실행하는 단계

실행 사이클에서 수행되는 마이크로 연산들은 명령어의 연산코드(operation code)에 따라 결정

명령어 해독(decode), 명령어 실행(execution) 을 수행함

예시) **데이터의 처리(ADD addr 명령어)**

```
T0 : MAR ← IR(Addr)
T1 : MBR ← M[MAR]
T2 : AC ← AC + MBR
```

⇒ 기억 장치에 저장된 데이터를 AC의 내용과 더하고, 그 결과를 다시 AC에 저장하는 명령어

# 04. 자주 나오는 질문 정리

### **CPU의 기본 구성 요소와 역할을 설명하세요.**

- CPU는 크게 제어 장치(Control Unit), 산술 논리 장치(ALU), 레지스터로 구성됩니다.
- 제어 장치는 명령어를 해석하고 실행 순서를 관리하며, ALU는 산술 및 논리 연산을 수행하고, 레지스터는 데이터와 명령어를 임시로 저장합니다.

### 명령어 처리 과정은?

명령어 처리 과정은 인출 사이클과 실행 사이클 두개로 나누어집니다. 

인출 사이클은 PC에 저장된 주소를 메모리 주소 레지스터에 저장하고 PC값을 1 증가시킵니다. 

그리고 명령어를 명령어 레지스터에 전달하면 인출 사이클이 완료됩니다. 

실행 사이클은 데이터를 인출하고 데이터 처리 그리고 처리된 데이터를 저장하는 과정을 거쳐서 완료됩니다.


### 참조

- [https://hongong.hanbit.co.kr/컴퓨터의-4가지-핵심-부품cpu-메모리-보조기억장/](https://hongong.hanbit.co.kr/%EC%BB%B4%ED%93%A8%ED%84%B0%EC%9D%98-4%EA%B0%80%EC%A7%80-%ED%95%B5%EC%8B%AC-%EB%B6%80%ED%92%88cpu-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EB%B3%B4%EC%A1%B0%EA%B8%B0%EC%96%B5%EC%9E%A5/)
- [https://velog.io/@hyunji015/컴퓨터구조-명령어-사이클과-인터럽트](https://velog.io/@hyunji015/%EC%BB%B4%ED%93%A8%ED%84%B0%EA%B5%AC%EC%A1%B0-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%82%AC%EC%9D%B4%ED%81%B4%EA%B3%BC-%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8)
- http://www.ktword.co.kr/test/view/view.php?no=6256
- [https://velog.io/@rlagurwns112/컴퓨터-구조-면접-질문-정리](https://velog.io/@rlagurwns112/%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B5%AC%EC%A1%B0-%EB%A9%B4%EC%A0%91-%EC%A7%88%EB%AC%B8-%EC%A0%95%EB%A6%AC)
- https://gamedevlog.tistory.com/71
