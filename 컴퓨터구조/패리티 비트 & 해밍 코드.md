# 패리티 비트 & 해밍 코드

# 00. 오류 검출

프로그램 수행 과정에서 오류가 생기면 그로 인한 다양한 문제가 나타난다.

ex) 인터넷 뱅킹으로 10만원 송금 → 오류로 100만원이나 10원 송금

따라서 프로그램 작성 시 반드시 오류 검출 과정을 거친다.

- 컴퓨터가 처리한 데이터가 올바른지 검사
- 하드웨어나 소프트웨어 상의 틀린 곳을 검출

⇒ 오류 검출에 패리티 비트가 사용된다.

# 01. 패리티 비트

- 데이터 전송 과정에서 1비트 오류를 검출하기 위해 추가한 비트
- ASCII 코드(7비트) + 패리티 비트(1비트)

![image](https://github.com/user-attachments/assets/de9d5b79-c863-4aeb-9b5e-652ba242b9c8)

**전체 비트에서 1의 개수**가 짝수 또는 홀수인지를 보증하기 위해 사용함

따라서 패리티 비트를 포함해 **1의 개수**가 짝수 or 홀수 개가 되도록 구성한다.

데이터 전송 과정에서 1비트 오류가 발생하면 1의 개수가 홀수 개로 바뀐다.

예를 들어, 위의 그림에서 전송 중 세번째 비트가 0에서 1로 바뀌면 수신 호스트는 11110010을 받는다. 

이 때 패리티 검사를 통해 1의 개수가 홀수로 변경된 사실을 파악하여 1비트 오류가 발생했음을 확인할 수 있다.

### 패리티 비트 종류 2가지

- 홀수 패리티(Odd Parity) - 1의 개수를 홀수로 만드는 것
- 짝수 패리티(Even Parity) - 1의 개수를 짝수로 만드는 것

 송신 호스트와 수신 호스트는 짝수 패리티나 홀수 패리티 중 동일한 한 가지 방식을 사용해야 한다.

### 한계

- 패리티 비트는 오류 발생 여부만 알 수 있지 오류를 수정할 수 없다
- 2개 비트 오류 발생 시 검출할 수 없다

# 02. 해밍 코드

- 데이터비트에 몇 개의 체크비트가 추가된 코드

기존의 체크비트들은 수신된 데이터열에 에러 유무만 확인 할 수 있었는데,

해밍코드를 이용하면 수신 단에서 **에러 비트의 위치 파악 + 정정 가능**

### 체크 비트의 수

![image 1](https://github.com/user-attachments/assets/970e9e59-bc4e-4c63-ab74-dac2c9d94bbe)

데이터 비트가 1바이트(8비트)일 때, p는 최소 4가 되어야 함

### 체크 비트의 삽입 위치

총 비트 수 12 = 데이터 비트 8 + 체크 비트 4

4개의 체크 비트는 **2의 n승 위치에 순서대로 삽입**

1, 2, 4, 8 번째 위치에 삽입!

![image 2](https://github.com/user-attachments/assets/a1550416-bcfa-46cb-823c-ea6043bc57a1)

나머지 위치에는 원래의 데이터 비트 넣기

![image 3](https://github.com/user-attachments/assets/44d2678c-bba8-4986-a9aa-9fbed37cb8fe)

⇒ 수신 단의 데이터스트림 형식

### 체크 비트가 패리티체킹을 하는 방법

![image 4](https://github.com/user-attachments/assets/3a27433c-3270-44fc-a245-2467451325a9)

예) P4는 D12, D7, D6, D5를 체크
짝수 패리티를 사용한다고 가정할 때, 해당 네 개의 비트가 1011이라면 P4는 1이 된다.

각 체크비트는 2^0, 2^1, 2^2 등의 단위로 건너 뛰어 체크하는 특징이 보임

### 해밍 코드 사용 예시

1. 송신, 수신 단계에서 체크 비트만 모아서 비교
2. 체크 비트의 일치 여부를 따져 에러 코드 확인
3. 에러코드를 Decimal로 읽어 에러 위치 확인 후 정정

---

1. `01010101` 이라는 8bit 데이터를 송신
    
    ![image 5](https://github.com/user-attachments/assets/cc2e43ea-ee50-4842-bcbf-a7316a6bee2a)
    
2. 데이터 비트에 맞춰 체크 비트 채워 넣기
    
    ![image 6](https://github.com/user-attachments/assets/da18e4df-5182-4ef8-85da-2ff8ed7467d0)
    
    `010100101111` 송신
    
3. 9번째 비트 D9에서 에러 발생하였다고 가정
    
    ![image 7](https://github.com/user-attachments/assets/83257d65-dc67-4197-8e28-fa9ec3f2d62a)
    
    D9의 값이 바뀌어, P8과 P1 체크비트의 내용도 바뀌어 수신 `010010101110`
    

1. 에러 코드 확인
    
    ![image 8](https://github.com/user-attachments/assets/9d09fa41-6f13-41c8-9959-39b7c94926d8)
    
    1001 (Binary) → 9 (Decimal)
    
    D9 비트가 문제 있음을 확인 후 정정하면 됨
    

### 출처

- [패리티 비트](https://www.nise.go.kr/sedu/pt/page1_05.html)
- [해밍 코드 설명](https://m.blog.naver.com/ggggamang/221113176831)
